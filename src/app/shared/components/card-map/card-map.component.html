<div class="card box-shadow" *ngIf="dataset">
    <div class="card-body d-flex flex-column">
        <div class="card-title text-bold">
            <div class="d-flex justify-content-between align-items-start">
                <b class="">
                    <a routerLink="/map/{{dataset?.datasetId}}/{{dataset?.initiative.getSlug()}}/circles"> {{dataset?.initiative.name}}</a>
                </b>
            </div>

        </div>
        <div class="card-subtitle">
            Organization
            <a routerLink="/teams/{{dataset?.team?.team_id}}/{{dataset?.team?.getSlug()}}">{{dataset?.team?.name}}</a>

        </div>
        <div class="card-subtitle mt-2 text-muted small">
            <div class="d-flex justify-content-between">
                <span *ngIf="dataset?.initiative.children">
                    <div *ngIf="dataset?.initiative.children[0]?.accountable" class="text-muted">Vision held by
                        <img class="visionnary rounded-circle" src="{{dataset?.initiative.children[0]?.accountable?.picture}}" alt="{{dataset?.initiative.children[0]?.accountable?.name}}">
                        <a class="text-muted" routerLink="/map/{{dataset?.datasetId}}/{{dataset?.initiative.getSlug()}}/summary" 
                        [queryParams]="{member: dataset?.initiative.children[0]?.accountable?.shortid}">
                            <span> {{dataset?.initiative.children[0]?.accountable?.name}}</span>
                        </a>

                    </div>

                    <div *ngIf="!dataset?.initiative.children[0]?.accountable" class="text-warning">
                        No vision holder yet.
                    </div>
                </span>
            </div>

        </div>



    </div>
    <div class="card-footer border-top-0">
        <div class="small d-flex justify-content-between align-items-center">
            <div>{{dataset?.depth}} {{dataset?.depth < 1 ? "sub-circle" : "sub-circles"}}</div>
            <button *ngIf="isExportAvailable" class="btn btn-sm btn-link cursor-pointer " (click)="export(dataset)">
                <i class="fa fa-table" aria-hidden="true"></i>
                <span *ngIf="!isExporting">Export</span>
                <span class="text-muted" *ngIf="isExporting">Exporting</span>
            </button>
        </div>
    </div>
</div>