<!-- 
    
    <div>
    <h2 class="text-center">Welcome to Maptio! </h2>
    <h6 class="text-muted text-center ">Maptio helps you organise without traditional management hierarchy.</h6>
    <hr>
    
    <h3 class="text-dark text-center my-4" *ngIf="!isOnboardingCompleted()">
        Let's get you started:
    </h3>
    <div *ngIf="isOnboardingCompleted()">
        <hr>

        <div *ngIf="isOnboardingCompleted()">
            <h6 class="mx-2">
                <b>Succeed with Maptio:</b>
            </h6>

            <div class="d-flex align-items-start my-3">
                <span class="mx-2">
                    <i class="fa fa-rss" aria-hidden="true"></i>
                </span>
                <span>
                    Read our
                    <a target="blank" href="https://medium.com/maptio/create-organisational-clarity-using-initiative-mapping-967069247380">free guide</a> to mapping your organization

                </span>
            </div>

            <div class="d-flex align-items-start my-3">
                <span class="mx-2">
                    <i class="fa fa-phone" aria-hidden="true"></i>
                </span>
                <span>
                    <a target="blank" href="https://calendly.com/tomnixon/30min">Book a free mastery call</a> with Maptio founder Tom Nixon
                </span>
            </div>


            <div class="d-flex align-items-start my-3">
                <span class="mx-2">
                    <i class="far fa-comments" aria-hidden="true"></i>
                </span>
                <span>
                    Help us make Maptio better !
                    <a target="blank" href="{{SURVEY_URL}}">Take the survey</a>
                </span>
            </div>


        </div>

        <hr>
    </div>





    <div class="d-flex justify-content-start text-muted">
        <div class="d-flex flex-column  align-items-start" [class.h4]="!isOnboardingCompleted()">
            <div class="d-flex align-items-start" [class.my-3]="!isOnboardingCompleted()" [class.my-2]="isOnboardingCompleted()">
                <span class="mx-2">
                    <i class="fa fa-check text-success" aria-hidden="true"></i>
                </span>
                <span>
                    Set up your
                    <a routerLink="/{{user.shortid}}/{{user.getSlug()}}">user profile</a>
                </span>
            </div>

            <div class="d-flex align-items-start" [class.my-3]="!isOnboardingCompleted()" [class.my-2]="isOnboardingCompleted()">
                <span class="mx-2">
                    <i *ngIf="isZeroTeam" class="far fa-square" aria-hidden="true"></i>
                    <i *ngIf="!isZeroTeam" class="fa fa-check text-success" aria-hidden="true"></i>
                </span>
                <a *ngIf="isZeroTeam" [routerLink]="['/teams']" [queryParams]="{onboarding: 'team'}">
                    Set up an organization
                </a>
                <span *ngIf="!isZeroTeam" class="text-muted">
                    <ng-container *ngIf="!isMultipleTeams">Organization
                        <a routerLink="/teams/{{teamId}}/team">{{teamName}}</a> set up
                    </ng-container>
                    <ng-container *ngIf="isMultipleTeams">
                        <a routerLink="/teams">{{teamsCount}} organizations</a> set up
                    </ng-container>

                </span>
            </div>

            <div class="d-flex align-items-start" [class.my-3]="!isOnboardingCompleted()" [class.my-2]="isOnboardingCompleted()" *ngIf="!isMultipleTeams">
                <span class="mx-2">
                    <i *ngIf="isZeroTeammates" class="far fa-square" aria-hidden="true"></i>
                    <i *ngIf="!isZeroTeammates" class="fa fa-check text-success" aria-hidden="true"></i>
                </span>
                <div *ngIf="isZeroTeammates">
                    <ng-container *ngIf="isZeroTeam">
                        <span>Add a few people or import a .csv</span>
                    </ng-container>
                    <ng-container *ngIf="!isZeroTeam">
                        <a [routerLink]="['/teams', teamId, 'team','members']" [queryParams]="{onboarding: 'members'}">
                            Add a few people
                        </a>
                        or
                        <a routerLink="/teams/{{teamId}}/team/import"> import a .csv </a> file
                    </ng-container>

                </div>
                <span *ngIf="!isZeroTeammates" class="text-muted">
                    <ng-container *ngIf="!isMultipleTeams">
                        Organization
                        <a [routerLink]="['/teams', teamId, 'team','members']" [queryParams]="{onboarding:  isOnboardingCompleted() ? 'none' : 'members'}">{{teamName}}</a> now has {{membersCount}} {{membersCount===1 ? "person" :"people"}}.
                    </ng-container>
                    <ng-container *ngIf="isMultipleTeams">
                        <a routerLink="/teams">Organizations and people setup </a>
                    </ng-container>
                </span>
            </div>

            <div class="d-flex align-items-start" [class.my-3]="!isOnboardingCompleted()" [class.my-2]="isOnboardingCompleted()" *ngIf="!isMultipleTeams">
                <span class="mx-2">
                    <i *ngIf="isZeroTerminology" class="far fa-square" aria-hidden="true"></i>
                    <i *ngIf="!isZeroTerminology" class="fa fa-check text-success" aria-hidden="true"></i>
                </span>
                <div *ngIf="isZeroTerminology">
                    <ng-container *ngIf="isZeroTeam">
                        <span>Customize your organization terminology</span>
                    </ng-container>
                    <ng-container *ngIf="!isZeroTeam">
                        <a [routerLink]="['/teams', teamId, 'team','settings']" [queryParams]="{onboarding: isOnboardingCompleted() ? 'none' : 'settings'}">
                            Customize your organization terminology
                        </a>
                    </ng-container>

                </div>
                <span *ngIf="!isZeroTerminology" class="text-muted">
                    <ng-container *ngIf="!isMultipleTeams">
                        Terminology:
                        <a [routerLink]="['/teams', teamId, 'team','settings']" [queryParams]="{onboarding: isOnboardingCompleted() ? 'none' : 'settings'}">{{authorityName}}</a>
                        and
                        <a [routerLink]="['/teams', teamId, 'team','settings']" [queryParams]="{onboarding: isOnboardingCompleted() ? 'none' : 'settings'}">{{helperName}}</a>
                    </ng-container>
                    <ng-container *ngIf="isMultipleTeams">
                        Terminology set up
                    </ng-container>
                </span>
            </div>

            <div class="d-flex align-items-start" [class.my-3]="!isOnboardingCompleted()" [class.my-2]="isOnboardingCompleted()" *ngIf="isOnboardingCompleted() && !isMultipleTeams">
                <span class="mx-2">
                    <i *ngIf="isZeroIntegration" class="far fa-square" aria-hidden="true"></i>
                    <i *ngIf="!isZeroIntegration" class="fa fa-check text-success" aria-hidden="true"></i>
                </span>
                <div *ngIf="isZeroIntegration">
                    <ng-container *ngIf="isZeroTeam">
                        <span class="slack">Set up Slack integration (optional)</span>
                    </ng-container>
                    <ng-container *ngIf="!isZeroTeam">
                        <a class="slack" [routerLink]="['/teams', teamId, 'team','integrations']" [queryParams]="{onboarding: 'integrations'}">
                            Set up Slack integration (optional)
                        </a>
                    </ng-container>

                </div>
                <span *ngIf="!isZeroIntegration" class="text-muted">
                    <ng-container *ngIf="!isMultipleTeams">
                        <a class="slack" routerLink="/teams/{{teamId}}/team/integrations">Slack integration</a> active
                    </ng-container>
                    <ng-container *ngIf="isMultipleTeams">
                        <a class="slack" routerLink="/teams/{{teamId}}/team/integrations">Slack integrations</a> active
                    </ng-container>
                </span>
            </div>

            <div class="d-flex align-items-start" [class.my-3]="!isOnboardingCompleted()" [class.my-2]="isOnboardingCompleted()">
                <span class="mx-2">
                    <i *ngIf="isZeroMaps" class="far fa-square" aria-hidden="true"></i>
                    <i *ngIf="!isZeroMaps" class="fa fa-check text-success" aria-hidden="true"></i>
                </span>
                <div *ngIf="isZeroMaps">
                    <ng-container *ngIf="isZeroTeam">
                        <span>Create a map</span>
                    </ng-container>
                    <ng-container *ngIf="!isZeroTeam">
                        <a [routerLink]="['/teams', teamId, 'team','maps']" [queryParams]="{onboarding: 'map'}">
                            Create a map
                        </a>
                    </ng-container>

                </div>
                <div *ngIf="!isZeroMaps">
                    <ng-container *ngIf="!isMultipleMaps">
                        <span>
                            Map
                            <a routerLink="/map/{{datasetId}}/map/circles">
                                {{mapName}}
                            </a> is now active
                        </span>
                    </ng-container>
                    <ng-container *ngIf="isMultipleMaps">
                        {{mapsCount}} active maps
                    </ng-container>

                </div>
            </div>


        </div>
    </div>


</div> -->

<div class="modal-header d-flex justify-content-center border-bottom-0 ">
    <!-- <h1 class="modal-title ">{{user?.firstname}}, welcome to Maptio!</h1> -->
</div>
<div class="modal-body fixed-height">
    <div class="card border-0">
        <div class="card-body">
            <ng-container *ngIf="currentStep === Steps.Welcome">
                <ng-container *ngTemplateOutlet="welcome"></ng-container>
            </ng-container>

            <ng-container *ngIf="currentStep === Steps.CreateTeam">
                <ng-container *ngTemplateOutlet="createteam"></ng-container>
            </ng-container>

            <ng-container *ngIf="currentStep === Steps.AddMember">
                <ng-container *ngTemplateOutlet="addmember"></ng-container>
            </ng-container>
            <ng-container *ngIf="currentStep === Steps.Terminology">
                <ng-container *ngTemplateOutlet="terminology"></ng-container>

            </ng-container>
            <ng-container *ngIf="currentStep === Steps.PickColor">
                <ng-container *ngTemplateOutlet="pickcolor"></ng-container>

            </ng-container>
            <ng-container *ngIf="currentStep === Steps.Ending">
                <ng-container *ngTemplateOutlet="ending"></ng-container>

            </ng-container>

        </div>

    </div>
</div>
<div class="modal-footer d-flex justify-content-between align-items-center" [class.border-top-0]="!nextActionName()">
    <div class="d-flex justify-content-start col-8 h-100">
        <div class="d-flex flex-column justify-content-end align-items-end w-100" *ngIf="getProgress()!==100">
            <div class="progress w-100" [style.height.%]="100" >
                <div class="progress-bar bg-gray" role="progressbar" [style.width.%]="getProgress()">{{getAbsoluteProgress()}}</div>
            </div>
            <!-- <span class="text-muted small">This only takes a few minutes</span> -->

        </div>

    </div>
    <div>
        <button type="button" class="btn btn-link" *ngIf="isSkippable()" (click)="nextStep()">Skip for now</button>
        <button type="button" class="btn btn-success" [class.invisible]="!nextActionName()" [class.disabled]="!isReady()" (click)="isReady() && nextStep()">{{nextActionName()}}</button>
    </div>
</div>

<ng-template #welcome>

    <span class="display-4">
        <span class="text-blue">👋 {{user?.firstname}} </span>, welcome to Maptio!</span>
    <h4 class="my-4 text-muted">
        Thanks for signing up and giving Maptio a try. We're really excited to have you onboard.


    </h4>

    <h4 class="mt-5">
        With Maptio, you will :
        <ul class="ml-2 my-3">
            <li class="h6 py-2">Communicate your organization structure simply and visually</li>
            <li class="h6 py-2">Onboard new people to your organisation quickly</li>
            <li class="h6 py-2">Build greater transparency and accountability over everyone’s roles</li>

        </ul>
    </h4>

    <!-- 
    <h6 class="my-5 text-muted">
        This short sequence will help you set up and you'll start mapping right away.

    </h6> -->

    <!-- <h4 class="mt-5">
        This will only take a few minutes.
    </h4> -->

</ng-template>

<ng-template #createteam>
    <h1>Choose a name for your organization</h1>
    <div class="my-5">
        <div class="form-row w-100 d-flex justify-content-center">
            <input #teamName type="text" class="form-control col-6">
            <button class="btn btn-success mx-1" (click)="renameTeam(teamName.value)">Set up organization</button>
        </div>
    </div>

</ng-template>


<ng-template #addmember>
    <h1>Add a few people</h1>
    <h4 class="text-muted">
        Add members to organization
        <b>{{teamName}}</b> to bring your maps to life. You can invite them to view and edit the maps later.
    </h4>

    <div class="mt-5 ">
        <div class="my-1 d-flex justify-content-start align-items-center " *ngFor="let member of members; let i=index">
            <onboarding-add-member [member]="member"></onboarding-add-member>
        </div>
        <!-- <hr> -->
        <div class="my-3 " *ngFor="let i of getMemberIndexes()">
            <div class="d-flex justify-content-start align-items-center">
                <onboarding-add-member [team]="team" (added)="onAdded($event)"></onboarding-add-member>
            </div>
        </div>
    </div>



    <p class="text-muted mt-5">
        <span>
            <i class="fas fa-info-circle"></i>
            A great place to start is adding the 3 people who have the most responsibility in your organization.
        </span>
    </p>

</ng-template>
<ng-template #terminology>
    <h1>Terminology</h1>

    <h4 class="text-muted">Tell us how your
        <b>{{teamName}}</b> calls its people internally, it will help make the maps more realistic.</h4>

    <div class="my-4">
        <onboarding-add-terminology [team]="team" (added)="isTerminologySaved=true"></onboarding-add-terminology>

    </div>

</ng-template>
<ng-template #pickcolor>
    <h1>Pick a color</h1>

    <h4 class="text-muted">What color should your map be?</h4>

    <div class="my-5 d-flex justify-content-between align-items-center">
        <div *ngFor="let color of COLORS" (click)="selectColor(color)" class="d-flex flex-column align-items-center position-relative">
            <div class="display-1 cursor-pointer select-color">
                <i [style.color]="color.name" class="fas fa-circle"></i>
            </div>
            <i [class.invisible]="!color.isSelected" class="fas fa-check fa-2x position-absolute center-center text-white"></i>

        </div>
    </div>

</ng-template>
<ng-template #ending>
    <h1>You're all set! 👍</h1>

    <h4 class="mt-4">
        An example map is ready for you, take some time to:
        <ul class="ml-2 my-3">
            <li class="h6 py-2">Explore the <b>circles, tree and network views</b> to get a different perspective</li>
            <li class="h6 py-2">Open the <b>directory</b> and see a person's list of responsabilities at a glance</li>
            <li class="h6 py-2">Create your own map, import your team members and start mapping</li>

        </ul>
    </h4>


    <h4 class="mt-4">
        Have more questions?
        <ul class="ml-2 my-3">
            <li class="h6 py-2">Start a chat with us or send us an email at support@maptio.com</li>
            <li class="h6 py-2"> Read our
                <a target="blank" href="https://medium.com/maptio/create-organisational-clarity-using-initiative-mapping-967069247380">free guide</a> to mapping your organization
            </li>
            <li class="h6 py-2">
                <a target="blank" href="https://calendly.com/tomnixon/30min">Book a free mastery call</a> with Maptio founder Tom Nixon

            </li>

        </ul>
    </h4>
    <h4>Look forward to talking to you!</h4>


</ng-template>