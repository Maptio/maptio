<div class="mt-3">

    <h2 class="ml-3">Create a Maptio account</h2>
    <br>
    <div class="alert alert-danger" role="alert" *ngIf="signUpMessageFail">
        {{signUpMessageFail}}
    </div>
    <div class="alert alert-success" role="alert" *ngIf="isRedirectToActivate">
        Looks like you already have an account! Check your email to set it up.
        <!-- <a href="/login?token={{userToken}}">Set it up</a> -->
    </div>

    <div class="alert alert-success" role="alert" *ngIf="isEmailAlreadyExist">
        This email already has an account. Do you want to <a routerLink="/login">log in</a>?
    </div>
    <div class="alert alert-success" role="alert" *ngIf="isConfirmationEmailSent">
        We have sent a confirmation email to <b>{{signupForm.controls['email'].value}}</b>
    </div>

    <form class="form-group" [formGroup]="signupForm" (submit)="createAccount()">

        <div class="form-group" [class.has-warning]="signupForm.controls['firstname'].invalid  && (signupForm.controls['firstname'].dirty || signupForm.controls['firstname'].touched)">
            <label for="inputFirstname">First name</label>
            <input type="text" id="inputFirstname" formControlName="firstname" class="form-control form-control-warning form-control-lg"
                placeholder="e.g. Stewie" required minlength="2">
            <small class="form-control-feedback" *ngIf="signupForm.controls['firstname'].invalid  && (signupForm.controls['firstname'].dirty || signupForm.controls['firstname'].touched)">
                First name must be at least 2 characters
            </small>
        </div>

        <div class="form-group" [class.has-warning]="signupForm.controls['lastname'].invalid  && (signupForm.controls['lastname'].dirty || signupForm.controls['lastname'].touched)">
            <label for="inputLastname">Last name</label>
            <input type="text" id="inputLastname" class="form-control form-control-warning form-control-lg" formControlName="lastname"
                placeholder="e.g. Griffin">
            <small class="form-control-feedback" *ngIf="signupForm.controls['lastname'].invalid  && (signupForm.controls['lastname'].dirty || signupForm.controls['lastname'].touched)">
                        Last name must be at least 2 characters
            </small>
        </div>

        <div class="form-group" [class.has-warning]="signupForm.controls['email'].invalid  && (signupForm.controls['email'].dirty || signupForm.controls['email'].touched)">
            <label for="inputEmail">Email</label>
            <input type="email" class="form-control form-control-warning form-control-lg" formControlName="email" placeholder="e.g. stewie.griffin@tinytots.com">
            <small class="form-control-feedback" *ngIf="signupForm.controls['email'].invalid  && (signupForm.controls['email'].dirty || signupForm.controls['email'].touched)">
                        We need your email!
            </small>
        </div>


        <div class="form-group" [class.has-warning]="signupForm.controls['confirmedEmail'].invalid  && (signupForm.controls['confirmedEmail'].dirty || signupForm.controls['confirmedEmail'].touched)">
            <label for="inputConfirmedEmail">Confirm email</label>
            <input type="email" class="form-control form-control-warning form-control-lg" formControlName="confirmedEmail" placeholder="e.g. stewie.griffin@tinytots.com">
            <small class="form-control-feedback" *ngIf="signupForm.controls['confirmedEmail'].invalid  && (signupForm.controls['confirmedEmail'].dirty || signupForm.controls['confirmedEmail'].touched)">
                        This doesnt look right... check your email again.
                </small>
        </div>

        <div class="form-check" [class.has-warning]="signupForm.controls['isTermsAccepted'].invalid  && (signupForm.controls['isTermsAccepted'].dirty || signupForm.controls['isTermsAccepted'].touched)">
            <label class="form-check-label">
                <input  type="checkbox" id="inputTC" formControlName="isTermsAccepted" class="form-check-input">
                
                I agree to Maptio's <a href="{{TOS_URL}}">Terms of Service</a>  and <a href="{{PRIVACY_URL}}">Privacy Policy</a>  
            </label>
        </div>

        <button type="submit" class="btn btn-success btn-lg" [class.disabled]="!signupForm.valid">Sign up</button>

    </form>


</div>