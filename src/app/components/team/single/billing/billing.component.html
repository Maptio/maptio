<ng-template #adminTipContent>
    <span class="text-warning">You don't have permission to edit this.
        <a href="{{KB_URL_PERMISSIONS}}" target="blank">Learn more.</a>
    </span>
</ng-template>
<ngx-loading [show]="isLoading" [config]="{fullScreenBackdrop : 'false',backdropBackgroundColour:'transparent'}"></ngx-loading>


<div *ngIf="!isLoading">
    <div *ngIf="team?.isPaying" class="my-5">
        <h5>Billing status</h5>
        <hr>
        <div>
            <span class="text-success">Payment is up to date
                <i class="ml-1 fa fa-check-circle text-success" aria-hidden="true"></i>
            </span>
        </div>
        <div *permissionsOnly="Permissions.canSubscribe" class="my-5">
            <h5>Billing information</h5>
            <hr>
            <div class="d-flex flex-column">
                <div class="d-flex justify-content-between my-3">
                    <a href="https://maptio.chargebeeportal.com/portal/login">Access your invoices and billing information or cancel your subscription</a>
                    <a class="btn btn-light" target="_blank" href="https://maptio.chargebeeportal.com/portal/login">Billing portal</a>
                </div>
            </div>
        </div>
    </div>

    <div *ngIf="!team?.isPaying">
        <div class="mb-3" *ngIf="remaningTrialDays >=0"> You have
            <b class="text-success">{{remaningTrialDays}} remaining days</b> on your free trial.
        </div>
        <div class="mb-3 " *ngIf="remaningTrialDays < 0">
            <span class="text-danger">Your free trial is over!</span>
            <div>
                Subscribe to a plan below to continue using Maptio or
                <a href="mailto:support@maptio.com?subject=I need more time to try Maptio">ask us for an free trial extension.</a>
            </div>
        </div>
        <ng-container *permissionsOnly="Permissions.canSubscribe;then thenSubscribe ; else elseSubscribe">
        </ng-container>

        <ng-template #thenSubscribe>
            <h5>Plans</h5>
            <hr>
            <div class="d-flex flex-column">
                <div class="d-flex justify-content-between my-3">
                    <a href="https://maptio.chargebee.com/hosted_pages/plans/standard-plan">$50/month for organisations up to 35 people</a>
                    <a class="btn btn-light" target="_blank" href="https://maptio.chargebee.com/hosted_pages/plans/standard-plan">Subscribe</a>
                </div>

                <div class="d-flex justify-content-between my-3">
                    <a href="https://maptio.chargebee.com/hosted_pages/plans/standard-plan50">$99/month for organisations up to 200 people</a>
                    <a class="btn btn-light" target="_blank" href="https://maptio.chargebee.com/hosted_pages/plans/standard-plan50">Subscribe</a>
                </div>
            </div>

        </ng-template>
        <ng-template #elseSubscribe>
            <h5>Plans</h5>
            <hr>
            <div class="d-flex flex-column">
                <div class="d-flex justify-content-between my-3">
                    <span>$50/month for organisations up to 35 people</span>
                    <a class="btn btn-light" [stickyPopover]="adminTipContent">Subscribe</a>
                </div>

                <div class="d-flex justify-content-between my-3">
                    <span>$99/month for organisations up to 200 people</span>
                    <a class="btn btn-light" [stickyPopover]="adminTipContent">Subscribe</a>
                </div>
            </div>

        </ng-template>



    </div>
    <h5>Teams</h5>
    <hr>
    <div>
        <span>You are limited to
            <b>one</b> team per plan.
            <a href="mailto:support@maptio.com?subject=I need to create more teams">Reach out if you need to create more</a>
        </span>
    </div>
</div>