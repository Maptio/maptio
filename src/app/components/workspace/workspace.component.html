<div class="row header">

    <div class="btn-group pull-left" *ngIf="team | async">
        <p class="pull-left team-name"> {{(team|async)?.name}}
            <span class="remove text-danger" placement="top" container="body" ngbTooltip="Clear team" (click)="removeTeam()"></span>
        </p>
        <a *ngFor="let user of members | async" class="btn btn-link btn-xs no-padding" routerLink="/summary/map/{{datasetId}}/u/{{user.shortid}}">
            <img *ngIf="user?.picture" class="member rounded-circle" src="{{user?.picture}}" alt="{{user?.name}}" title="{{user?.name}}"
            placement="top" container="body" ngbTooltip="{{user?.name}}">
            <img *ngIf="!user?.picture" class="member rounded-circle" src="/assets/images/user.jpg" alt="{{user?.name}}" title="{{user?.name}}"
            placement="top" container="body" ngbTooltip="{{user?.name}}">
        </a>
        <a class="btn btn-link btn-xs no-padding" routerLink="/team/{{(team |async)?.team_id}}">
            <i class="fa fa-plus" aria-hidden="true"></i>
        </a>
    </div>
    <div class="dropdown" *ngIf="!(team | async)">
        <a class="dropdown-toggle" id="teamDropdownLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                   Add a team to {{(dataset | async)?.initiative?.name}}
                </a>
        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="teamDropdownLink">
            <a class="dropdown-item" (click)="addTeamToInitiative(team)" *ngFor="let team of teams | async">
                           {{team.name}}
                        </a>
        </div>

    </div>
</div>

<div id="sideNavTree" class="" [class.showTree]="!isBuildingPanelCollapsed">
    <a class="btn toggle" (click)="toggleBuildingPanel()" [class.showTree]="!isBuildingPanelCollapsed">
            <i class="fa" [class.fa-pencil]="isBuildingPanelCollapsed" aria-hidden="true"></i>
            <i class="fa" [class.fa-times]="!isBuildingPanelCollapsed" aria-hidden="true"></i>
    </a>

    <div id="edit-panel-tree" class="mt-3 ml-1 mr-3 row" [class.showTree]="!isBuildingPanelCollapsed">
        <div class="building">
            <building #building (save)="saveChanges($event)" (openDetails)="openDetails($event)">Loading...</building>
        </div>
    </div>
</div>

<div id="sideNavDetails" class="rounded-right" [class.showDetails]="!isDetailsPanelCollapsed" [class.showTree]="!isBuildingPanelCollapsed">
    <a class="btn toggle" (click)="toggleDetailsPanel()" [class.showDetails]="!isDetailsPanelCollapsed">
                <i class="fa" [class.fa-times]="!isDetailsPanelCollapsed" aria-hidden="true"></i>
        </a>

    <div id="edit-panel-details" class=" ml-1 showDetails" [class.showDetails]="!isDetailsPanelCollapsed">
        <div class="details" *ngIf="!isDetailsPanelCollapsed">
            <initiative #initiative [datasetId]="datasetId" [node]="openedNode" [parent]="openedNodeParent" (edited)="saveDetailChanges()"></initiative>

        </div>
    </div>
</div>



<div id="main" [class.expand]="!isBuildingPanelCollapsed">

    <div class="mapping">
        <mapping>Loading...</mapping>
    </div>
</div>