<div class=" d-flex flex-column">
	<div class="d-flex justify-content-start mx-2 px-1">
		<button name="" id="" class="btn btn-light text-blue" (click)="toggleAll(true)" role="button" >
			<i class="fa fa-plus-circle large" aria-hidden="true"></i> Expand all
		</button>
		<button name="" id="" class="btn btn-light text-blue" (click)="toggleAll(false)" role="button">
			<i class="fa fa-minus-circle large" aria-hidden="true"></i> Collapse all
		</button>
		<button *ngIf="isEmptyMap" name="" id="" class="btn btn-outline-secondary ml-auto" (click)="addRootNode()" role="button" placement="top" container="body"
		ngbTooltip="Add a new initiative">
			<i class="fa fa-plus large" aria-hidden="true"></i> New outer circle
		</button>
	</div>
	<div class="mt-3">
		<tree-root #tree [nodes]="nodes" (updateData)="saveChanges()" [options]="options" [state]="state" (stateChange)="setState($event)">
			<ng-template #treeNodeTemplate let-node let-index="index">
				<initiative-node [node]="node" [datasetId]="datasetId" [team]="team" [user]="user" (edited)="saveChanges()" (update)="updateTreeModel(tree.treeModel)"
				 (open)="openNodeDetails($event)" (add)="openNodeDetails($event)"></initiative-node>
			</ng-template>
		</tree-root>
	</div>
</div>

<ng-template #dragConfirmation let-c="close" let-d="dismiss">
	<div class="modal-header">
		You are about to move ...
		<button type="button" class="close" aria-label="Close" (click)="d(false)">
			<span aria-hidden="true">&times;</span>
		</button>
	</div>

	<div class="modal-body">
		<p>
			<span *ngIf="fromInitiative.accountable">
				<b class="text-default">{{fromInitiative.accountable?.name}}</b>'s initiative
				<b class="text-info">{{fromInitiative.name}}</b>
			</span>
			<span *ngIf="!fromInitiative.accountable">Initiative
				<b class="text-info">{{fromInitiative.name}}</b>
			</span> and its sub-initiatives
			<br/> to
			<br/>
			<span *ngIf="toInitiative.accountable">
				<b class="text-default">{{toInitiative.accountable?.name}}</b>'s initiative
				<b class="text-info">{{toInitiative.name}}</b>
			</span>
			<span *ngIf="!toInitiative.accountable">Initiative
				<b class="text-info">{{toInitiative.name}}</b>
			</span>
		</p>
	</div>
	<div class="modal-footer">
		<p>These changes cannot be undone. Are you sure ? </p>
		<button type="button" class="btn btn-warning" (click)="c(true)">Yes</button>
		<button type="button" class="btn btn-default" (click)="c(false)">No</button>
	</div>
</ng-template>