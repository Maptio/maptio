<div class="control zero ">
  <div class="btn-group-vertical">
    <a class="btn btn-secondary p-1" [class.active]="isSearchToggled" [class.disabled]="isSearchDisabled" (click)="isSearchToggled=!isSearchToggled">
      <i class="fa fa-search"></i>
      <div class="icon-text-label">Search</div>
    </a>
    <a class="btn btn-secondary p-1" [class.active]="isFiltersToggled" [class.disabled]="isSearchDisabled" (click)="isFiltersToggled=!isFiltersToggled">
      <i class="fa fa-filter"></i>
      <div class="icon-text-label">Filter</div>
    </a>
  </div>
</div>

<div class="control zero panel d-flex flex-column col-5 align-items-start">
  <div *ngIf="isSearchToggled" class="mb-3 col-12 p-0">
    <search [list]="flattenInitiative" (selectInitiative)="zoomToInitiative($event)"></search>
  </div>
  <div *ngIf="isFiltersToggled" class="card card-block col-12">
    <filter-tags [team]="team" [tags]="tags" (changeTags)="broadcastTagsSelection($event)"></filter-tags>
  </div>
</div>

<div class="control first">
  <div class=" btn-group-vertical">

    <a class="btn btn-secondary circles p-1" routerLinkActive="active-link" routerLink="/map/{{datasetId}}/{{slug}}/circles"
      fragment="x={{VIEWPORT_WIDTH / 2}}&y={{VIEWPORT_WIDTH / 2 -180}}&scale=1=1&{{tagsFragment}}">
      <div class="icon-text-label" style="bottom: 2px;position: absolute;">Circles</div>
    </a>
    <a class="btn btn-secondary tree p-1" routerLinkActive="active-link" routerLink="/map/{{datasetId}}/{{slug}}/tree" fragment="x={{VIEWPORT_WIDTH / 10}}&y={{VIEWPORT_HEIGHT / 2}}&scale=1&{{tagsFragment}}">
      <div class="icon-text-label">Tree</div>
    </a>
    <a class="btn btn-secondary network p-1" routerLinkActive="active-link" routerLink="/map/{{datasetId}}/{{slug}}/network"
      fragment="x=0&y={{-this.VIEWPORT_HEIGHT / 4}}&scale=1&{{tagsFragment}}">
      <div class="icon-text-label">Network</div>
    </a>

    <!-- <a class="btn btn-secondary experimental icon" routerLinkActive="active-link" routerLink="/map/{{datasetId}}/{{slug}}/zoomable"
      fragment="x=640&y=460&scale=1&{{tagsFragment}}" placement="left" container="body" ngbTooltip="Experimental"></a> -->
  </div>
</div>

<div class="control  second mt-4">
  <div class=" btn-group-vertical">
    <a class="btn btn-secondary p-1" [class.disabled]="isSearchDisabled" (click)="zoomOut()">
      <i class="fa fa-minus"></i>
      <div class="icon-text-label">Zoom out</div>
    </a>
    <a class="btn btn-secondary p-1" [class.disabled]="isSearchDisabled" (click)="zoomIn()">
      <i class="fa fa-plus"></i>
      <div class="icon-text-label">Zoom in</div>
    </a>
    <a class="btn btn-secondary p-1" [class.disabled]="isSearchDisabled" (click)="resetZoom()">
      <i class="fa fa-compress" aria-hidden="true"></i>
      <div class="icon-text-label">Zoom fit</div>
    </a>
    <a class="btn btn-secondary p-1" [class.active]="isSettingToggled" [class.disabled]="isSearchDisabled" (click)="isSettingToggled=!isSettingToggled">
      <i class="fa fa-sliders" aria-hidden="true"></i>
      <div class="icon-text-label">Settings</div>
    </a>
  </div>
</div>

<div class="control third mt-4" *ngIf="isSettingToggled">
  <div class="card card-block">
    <h6 class="card-subtitle">Text settings</h6>
    <div class="form-group form-inline">
      <label for="fontSizeInput" class="col-form-label col-2">Size</label>

      <!-- <span class="fontSizeOutput">x {{fontSize$ | async}}</span> -->
      <input class="col-6" id="fontSizeInput" #fontSizeInput name="fontSizeInput" type="range" min="0.2" max="2" value="{{fontSize$ | async}}"
        step="0.1" (change)="changeFontSize(fontSizeInput.value)" orient="vertical">

      <button class="btn  btn-secondary text-muted ml-4" (click)="changeFontSize(1)">Reset</button>

    </div>
    <div class="form-group form-inline">
      <label for="example-time-input" class="col-form-label col-2">Color</label>
      <input class="col-6 form-control ml-1" [(colorPicker)]="fontColor" [style.background]="fontColor" [value]="fontColor" [cpOutputFormat]="'hex'"
        [cpPosition]="'top'" [cpPositionOffset]="'40%'" [cpPositionRelativeToArrow]="true" (colorPickerChange)="changeFontColor($event)"
      />
      <button class="btn  btn-secondary text-muted ml-4" (click)="changeFontColor('#000')">Reset</button>
    </div>
    <h6 class="card-subtitle mt-2 mb-2">Map settings</h6>
    <div class="form-group form-inline">
      <label for="example-time-input" class="col-form-label col-2">Color</label>
      <input class="col-6 form-control ml-1" [(colorPicker)]="mapColor" [style.background]="mapColor" [value]="mapColor" [cpOutputFormat]="'hex'"
        [cpPosition]="'top'" [cpPositionOffset]="'40%'" [cpPositionRelativeToArrow]="true" (colorPickerChange)="changeMapColor($event)"
      />
      <button class="btn  btn-secondary text-muted ml-4" (click)="changeMapColor('#ddd')">Reset</button>
    </div>
  </div>

</div>


<div *ngIf="isFirstEdit" class="instructions h2">
  Click
  <button type="button" class="btn  btn-success" (click)="addFirstNode()" placement="top" ngbTooltip="New initiative"
    container="body"><i class="fa fa-plus"></i></button> to create your first circle
</div>

<div tabIndex="-1" class="map" *ngIf="!isFirstEdit">
  <router-outlet (activate)='onActivate($event)' (deactivate)='onDeactivate($event)'></router-outlet>
</div>