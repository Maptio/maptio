<div class="m-3">
    <div class="alert alert-success alert-dismissable" role="alert" *ngIf="feedbackMessage">
        <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
        {{feedbackMessage}}
    </div>
    <div class="alert alert-danger alert-dismissable" role="alert" *ngIf="errorMessage">
        <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
        {{errorMessage}}
    </div>
    <div class="row">

            
        <div class="col-3">
            <div class="profile" [style.background-image]="'url('+ user?.picture +')'">
                <div *ngIf="isRefreshingPicture">Refreshing...</div>
                <ngx-loading [show]="isLoading"></ngx-loading>
            </div>
            <input class="inputfile" type="file" id="fileupload" #fileInput ng2FileSelect [uploader]="uploader" (change)="fileInput.value=''"
                accept="image/*" />
            <label for="fileupload">
                <i class="fa fa-upload" aria-hidden="true"></i>
                <small class="text-muted"> Maxixum size : 2MB</small>
            </label>
        </div>


        <form class="form-group col-9" [formGroup]="accountForm" (submit)="save()">
            <div class="d-flex w-100 justify-content-between">
                <h1 class="mb-3">{{user?.name}}</h1>
                <h6 class="email">
                    <span class="fa-stack fa-lg">
                        <i class="fa fa-circle fa-stack-2x"></i>
                        <i class="fa fa-envelope-o fa-stack-1x fa-inverse"></i>
                    </span>
                    {{user?.email}}</h6>
            </div>
            <div class="form-group" [class.has-warning]="accountForm.controls['firstname'].invalid  && (accountForm.controls['firstname'].dirty || accountForm.controls['firstname'].touched)">
                <label for="inputFirstname">First name</label>
                <input type="text" class="form-control form-control-warning form-control-lg" [(ngModel)]="firstname" formControlName="firstname"
                    placeholder="e.g. Harvey" required>
                <small class="form-control-feedback" *ngIf="accountForm.controls['firstname'].invalid  && (accountForm.controls['firstname'].dirty || accountForm.controls['firstname'].touched)">
                    Is this really how your mum calls you?
                </small>
            </div>
            <div class="form-group" [class.has-warning]="accountForm.controls['lastname'].invalid  && (accountForm.controls['lastname'].dirty || accountForm.controls['lastname'].touched)">
                <label for="inputLastname">Last name</label>
                <input type="text" class="form-control form-control-warning form-control-lg" [(ngModel)]="lastname" formControlName="lastname"
                    placeholder="e.g. Dent" required>
                <small class="form-control-feedback" *ngIf="accountForm.controls['lastname'].invalid  && (accountForm.controls['lastname'].dirty || accountForm.controls['lastname'].touched)">
                    In the army, that's how they would refer to you. Just tell us (please)
                </small>
            </div>

            <button type="submit" class="btn btn-success btn-lg pull-right" [class.disabled]="!accountForm.valid">Save</button>
        </form>

    </div>
</div>