<div class="control first" [class.showSettings]="!isSettingsPanelCollapsed">
  <div class=" btn-group-vertical">

    <a class="btn btn-secondary circles icon" routerLinkActive="active-link" routerLink="/map/{{datasetId}}/{{slug}}/initiatives"
      placement="left" container="body" ngbTooltip="Circle view"></a>
    <a class="btn btn-secondary tree icon" routerLinkActive="active-link" routerLink="/map/{{datasetId}}/{{slug}}/people" placement="left"
      container="body" ngbTooltip="Tree view"></a>
    <a class="btn btn-secondary network icon" routerLinkActive="active-link" routerLink="/map/{{datasetId}}/{{slug}}/connections"
      placement="left" container="body" ngbTooltip="Network view"></a>
  </div>
</div>

<div class="control  second mt-4" [class.showSettings]="!isSettingsPanelCollapsed">
  <div class=" btn-group-vertical">
    <a class="btn btn-secondary minus" (click)="zoomOut()" placement="left" container="body" ngbTooltip="Zoom out"></a>
    <a class="btn btn-secondary plus" (click)="zoomIn()" placement="left" container="body" ngbTooltip="Zoom in"></a>
    <a class="btn btn-secondary reset" (click)="resetZoom()" placement="left" container="body" ngbTooltip="Zoom fit"></a>
    <a class="btn btn-secondary settings" (click)="togglePanel()" placement="left" container="body" ngbTooltip="Settings"></a>

  </div>
</div>

<div class="control third" [class.showSettings]="!isSettingsPanelCollapsed">
  <div class="btn-group-vertical">
    <a class="btn btn-secondary btn-tag" [class.active]="tag.isSelected" placement="left" container="body" ngbTooltip="{{tag.name}}"
      *ngFor="let tag of tags; let i=index" (click)="toggleTag(tag)">
      <i class="fa fa-tag" aria-hidden="true" [style.color]="tag.color"></i>
    </a>
  </div>
</div>

<div id="sideNavSettings" class="rounded-left" [class.showSettings]="!isSettingsPanelCollapsed">

  <h4 class="text-muted d-flex justify-content-center mb-4">{{datasetName}}</h4>
  <!-- Nav tabs -->
  <ul class="nav nav-pills nav-fill mb-2" id="myTab" role="tablist">
    <li class="nav-item">
      <a class="nav-link active" id="filters-tab" data-toggle="tab" href="#filters" role="tab" aria-controls="filters" aria-selected="true">Filters</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" id="settings-tab" data-toggle="tab" href="#settings" role="tab" aria-controls="settings" aria-selected="false">Settings</a>
    </li>
  </ul>

  <!-- Tab panes -->
  <div class="tab-content">
    <div class="tab-pane active" id="filters" role="tabpanel" aria-labelledby="filters-tab">...</div>
    <div class="tab-pane" id="settings" role="tabpanel" aria-labelledby="settings-tab">

      <h6 class="lead">Font settings</h6>
      <div class="form-group row">
        <label for="example-time-input" class="col-4 col-form-label">Font size</label>
        <div class="col-8">
          <input class="vertical transparent" #fontInput name="fontInput" type="range" min="8" max="30" value="16" (change)="changeFontSize(fontInput.value)"
            orient="vertical" placement="left" container="body" ngbTooltip="Text size">
        </div>
      </div>

      <h6 class="lead">Edit Tags</h6>

      <div class="form-group row ml-0" *ngFor="let tag of tags; let i=index">
        <input type="text" class="col-4 col-form-label form-control" name="inputTagName" [ngModelOptions]="{standalone: true}" [ngModel]="tag.name"
          (ngModelChange)="saveTagName(tag, $event)" />
        <div class="col-4">

          <input class="form-control" [(colorPicker)]="tag.color" [style.background]="tag.color" [value]="tag.color" [cpOutputFormat]="'hex'"
            [cpPosition]="'bottom'" [cpPositionOffset]="'40%'" [cpPositionRelativeToArrow]="true" (colorPickerChange)="saveColor(tag, $event)"
          />
        </div>
      </div>
      <form class="form-group row ml-0" [formGroup]="newTagForm" (submit)="addTag()">
        <div class="" [class.has-warning]="newTagForm.controls['name'].invalid  && (newTagForm.controls['name'].dirty || newTagForm.controls['name'].touched)">
          <input type="text" id="inputname" formControlName="name" class="col-form-label form-control form-control-warning" placeholder="New tag"
            required name>
        </div>
        <div class="col-4">
          <input class="form-control" placeholder="Pick a color" [(colorPicker)]="newTagColor" [style.background]="newTagColor" [value]="newTagColor" [cpOutputFormat]="'hex'"
            [cpPosition]="'bottom'" [cpPositionOffset]="'40%'" [cpPositionRelativeToArrow]="true" (colorPickerChange)="newTagColor=$event"
            formControlName="color"
            />
        </div>
        <button type="submit" class="btn btn-success" [class.disabled]="!newTagForm.valid">Add</button>
      </form>



    </div>
  </div>
</div>


<div class="control fourth" *ngIf="isDisplayLockingToggle()">
  <div class="">
    <a #lockInput *ngIf="isLocked" [class.background]="!isLocked" class="btn text-warning" (click)="lock(false)" placement="top"
      container="body" ngbTooltip="Drag and drop, adding and removing disabled">
      <i class="fa fa-lock" aria-hidden="true"></i> Locked (view mode)</a>
    <a #lockInput *ngIf="!isLocked" [class.background]="!isLocked" class="btn text-default" (click)="lock(true)" placement="top"
      container="body" ngbTooltip="Drag and drop, adding and removing enabled">
      <i class="fa fa-unlock-alt" aria-hidden="true"></i> Unlocked (edit mode)</a>
  </div>
</div>

<div class="map" [class.slide]="!isSettingsPanelCollapsed">
  <router-outlet (activate)='onActivate($event)' (deactivate)='onDeactivate($event)'></router-outlet>
</div>