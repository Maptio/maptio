<div class="card">
    <div class="card-body">
        <div class="card-title d-flex justify-content-between align-items-baseline">
            <span
                class="btn-link cursor-pointer"
                (click)="openInitiative(initiative)"
            >
                {{initiative.name}}
            </span>
        </div>

        <div class="card-text">
            <div
                *ngIf="(initiative.helpers?.length !== 0)"
                class="row"
                [class.bg-light]="isShowRoles"
            >
                <a
                    class="btn btn-link px-3 text-left"
                    data-toggle="collapse"
                    [attr.data-target]="'.'+getMultipleCollapseClass()"
                    [attr.aria-controls]="getMultipleCollapseId()"
                    (click)="isShowRoles=!isShowRoles"
                    aria-expanded="false"
                    role="button"
                >
                    <i 
                        class="fa"
                        [class.fa-caret-right]="!isShowRoles"
                        [class.fa-caret-down]="isShowRoles"
                        aria-hidden="true"
                    ></i>
                </a>

                <div>
                    <!-- Members list when expanded -->
                    <div
                        class="collapse {{getMultipleCollapseClass()}} w-100"
                        id="{{getWithDescriptionId()}}"
                    >
                        <div *ngFor="let h of initiative.helpers">
                            <div class="d-flex my-1 align-items-baseline my-2">
                                <button
                                    (click)="onSelectMember(h)"
                                    class="btn btn-link p-0 border-0"
                                >
                                    <img
                                        class="rounded-circle participant-picture"
                                        src="{{h.picture}}"
                                        alt="{{h.name}}"
                                        title="{{h.name}}"
                                        placement="top"
                                        container="body"
                                        ngbTooltip="{{h.name}}"
                                    >
                                </button>

                                <div class="mb-2 ml-2">
                                    <initiative-helper-role
                                        *ngFor="let role of h.roles"
                                        [role]="role"
                                        [closed]="true"
                                        [showControls]="false"
                                        class="d-block mb-1">
                                    </initiative-helper-role>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Members list when collapsed -->
                    <div
                        class="collapse {{getMultipleCollapseClass()}} w-100 show"
                        id="{{getNoDescriptionId()}}"
                    >
                        <div class="d-flex justify-content-start flex-wrap">
                            <ul class="list-inline d-flex flex-row-reverse picture-list my-1 flex-wrap">
                                <li
                                    class="list-inline-item rounded-circle border-thick border-white"
                                    *ngFor="let h of sortHelpers()"
                                >
                                    <button
                                        (click)="onSelectMember(h)"
                                        class="btn btn-link p-0 border-0"
                                    >
                                        <img
                                            class="rounded-circle participant-picture"
                                            src="{{h.picture}}" alt="{{h.name}}"
                                            title="{{h.name}}"
                                            placement="top"
                                            container="body"
                                            ngbTooltip="{{h.name}}"
                                        >
                                    </button>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
