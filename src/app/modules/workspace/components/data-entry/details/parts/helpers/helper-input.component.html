<ng-template #editTipContent>
    <ng-content></ng-content>
</ng-template>

<div class="d-flex align-items-center w-100">
    <div class="d-flex align-items-center w-100">
        <img src="{{helper.picture}}" class="participant-picture rounded-circle mr-1">
        <a [routerLink]="summaryUrlRoot" [queryParams]="{member: helper.shortid}">{{helper.name}}</a>
        <span class="text-muted mx-1" *ngIf="isAuthority">({{team?.settings.authority | titlecase }})</span>
    </div>

    <button *ngIf="!isUnauthorized" class="btn btn-outline-secondary remove" mwlConfirmationPopover
        [popoverMessage]="'Remove this helper and associated role?'" placement="top" container="body"
        focusbutton="cancel" appendToBody="false" (confirm)="onRemove()" (cancel)="cancelClicked=true"></button>
</div>

<!-- <div class="mt-2" *ngIf="!(isUnauthorized && isEmptyRole)">
    <common-textarea *ngFor="let role of helper.roles" rows="3" label="Role" [isUnauthorized]="isUnauthorized" [placeholder]="placeholder"
        [text]="role ? role?.description : ''" (save)="onChangeRole($event)">
        <ng-content></ng-content>
    </common-textarea>
</div> -->

<div class="d-flex flex-column mt-2">
    <div class="d-flex align-items-baseline justify-content-start">
        <span class="d-flex align-items-baseline text-gray-light mr-1">
            <i class="fas fa-align-left  mr-1"></i>
            <span class="text-uppercase text-bold small">Role</span>
        </span>

        <span *ngIf=" isUnauthorized" class="text-gray-light small" [stickyPopover]="editTipContent" placement='right'>
            <i class="fas fa-lock"></i>
        </span>

        <button *ngIf="isAddRoleMode" class="btn btn-link btn-sm" (click)="isAddRoleMode=false">Cancel</button>
        <button [class.invisible]="isAddRoleMode || isUnauthorized" class="btn btn-link btn-sm"
            (click)="!isUnauthorized && isAddRoleMode=true">Add role</button>
    </div>

    <initiative-helper-role-select *ngIf="isAddRoleMode" [roles]="helper.roles" (pick)="onRolePick($event)">
    </initiative-helper-role-select>

    <initiative-helper-role-input *ngFor="let role of helper.roles; let roleIndex = index"
        [role]="role" [roleIndex]="roleIndex" (remove)="onRemoveRole($event)" (save)="onChangeRole()">
    </initiative-helper-role-input>

    <!-- <div class="w-100 position-relative" *ngIf="isEditMode">
        <small *ngIf="!isHeader" class="my-1 position-absolute bottom-left text-default text-muted ml-auto">
            Use
            <a href="https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet" target="_blank">markdown</a> to
            create links and add formatting.
        </small>

        <textarea #inputDescription class="form-control mb-4" id="inputDescription" [value]="text || ''"
            data-provide="markdown" data-iconlibrary="fa" data-autofocus="true" [attr.rows]="rows"
            [attr.placeholder]="placeholder" (change)="onChange($event.target.value)" (blur)="isEditMode=false">
        </textarea>
    </div>

    <div *ngIf="!isEditMode && !isTextEmpty" (click)="!isUnauthorized && isEditMode=true"
        class="position-relative w-100 bg-light p-2 rounded">

        <markdown class="cursor-text  border-0 w-100 h-100" [ngClass]="{'lead text-bold' : isHeader}" [data]="text">
        </markdown>
    </div> -->
</div>
