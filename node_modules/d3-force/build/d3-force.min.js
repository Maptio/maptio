// https://d3js.org/d3-force/ Version 1.0.3. Copyright 2016 Mike Bostock.
!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("d3-quadtree"),require("d3-collection"),require("d3-dispatch"),require("d3-timer")):"function"==typeof define&&define.amd?define(["exports","d3-quadtree","d3-collection","d3-dispatch","d3-timer"],t):t(n.d3=n.d3||{},n.d3,n.d3,n.d3,n.d3)}(this,function(n,t,r,e,i){"use strict";function u(n){return n.x+n.vx}function o(n){return n.y+n.vy}function f(n,t){return t}function a(n,t){var r=n.get(t);if(!r)throw new Error("missing: "+t);return r}function c(n){return n.x}function l(n){return n.y}var h=function(n,t){function r(){var r,i,u=e.length,o=0,f=0;for(r=0;r<u;++r)i=e[r],o+=i.x,f+=i.y;for(o=o/u-n,f=f/u-t,r=0;r<u;++r)i=e[r],i.x-=o,i.y-=f}var e;return null==n&&(n=0),null==t&&(t=0),r.initialize=function(n){e=n},r.x=function(t){return arguments.length?(n=+t,r):n},r.y=function(n){return arguments.length?(t=+n,r):t},r},v=function(n){return function(){return n}},y=function(){return 1e-6*(Math.random()-.5)},d=function(n){function r(){function n(n,t,e,i,u){var o=n.data,f=n.r,a=g+f;{if(!o)return t>v+a||i<v-a||e>d+a||u<d-a;if(o.index>r){var l=v-o.x-o.vx,x=d-o.y-o.vy,p=l*l+x*x;p<a*a&&(0===l&&(l=y(),p+=l*l),0===x&&(x=y(),p+=x*x),p=(a-(p=Math.sqrt(p)))/p*c,h.vx+=(l*=p)*(a=(f*=f)/(s+f)),h.vy+=(x*=p)*a,o.vx-=l*(a=1-a),o.vy-=x*a)}}}for(var r,i,h,v,d,g,s,x=f.length,p=0;p<l;++p)for(i=t.quadtree(f,u,o).visitAfter(e),r=0;r<x;++r)h=f[r],g=a[r],s=g*g,v=h.x+h.vx,d=h.y+h.vy,i.visit(n)}function e(n){if(n.data)return n.r=a[n.data.index];for(var t=n.r=0;t<4;++t)n[t]&&n[t].r>n.r&&(n.r=n[t].r)}function i(){if(f){var t,r=f.length;for(a=new Array(r),t=0;t<r;++t)a[t]=+n(f[t],t,f)}}var f,a,c=1,l=1;return"function"!=typeof n&&(n=v(null==n?1:+n)),r.initialize=function(n){f=n,i()},r.iterations=function(n){return arguments.length?(l=+n,r):l},r.strength=function(n){return arguments.length?(c=+n,r):c},r.radius=function(t){return arguments.length?(n="function"==typeof t?t:v(+t),i(),r):n},r},g=function(n){function t(n){return 1/Math.min(d[n.source.index],d[n.target.index])}function e(t){for(var r=0,e=n.length;r<M;++r)for(var i,u,o,f,a,h,v,d=0;d<e;++d)i=n[d],u=i.source,o=i.target,f=o.x+o.vx-u.x-u.vx||y(),a=o.y+o.vy-u.y-u.vy||y(),h=Math.sqrt(f*f+a*a),h=(h-l[d])/h*t*c[d],f*=h,a*=h,o.vx-=f*(v=g[d]),o.vy-=a*v,u.vx+=f*(v=1-v),u.vy+=a*v}function i(){if(h){var t,e,i=h.length,f=n.length,v=r.map(h,s);for(t=0,d=new Array(i);t<i;++t)d[t]=0;for(t=0;t<f;++t)e=n[t],e.index=t,"object"!=typeof e.source&&(e.source=a(v,e.source)),"object"!=typeof e.target&&(e.target=a(v,e.target)),++d[e.source.index],++d[e.target.index];for(t=0,g=new Array(f);t<f;++t)e=n[t],g[t]=d[e.source.index]/(d[e.source.index]+d[e.target.index]);c=new Array(f),u(),l=new Array(f),o()}}function u(){if(h)for(var t=0,r=n.length;t<r;++t)c[t]=+x(n[t],t,n)}function o(){if(h)for(var t=0,r=n.length;t<r;++t)l[t]=+p(n[t],t,n)}var c,l,h,d,g,s=f,x=t,p=v(30),M=1;return null==n&&(n=[]),e.initialize=function(n){h=n,i()},e.links=function(t){return arguments.length?(n=t,i(),e):n},e.id=function(n){return arguments.length?(s=n,e):s},e.iterations=function(n){return arguments.length?(M=+n,e):M},e.strength=function(n){return arguments.length?(x="function"==typeof n?n:v(+n),u(),e):x},e.distance=function(n){return arguments.length?(p="function"==typeof n?n:v(+n),o(),e):p},e},s=10,x=Math.PI*(3-Math.sqrt(5)),p=function(n){function t(){u(),p.call("tick",a),c<l&&(g.stop(),p.call("end",a))}function u(){var t,r,e=n.length;for(c+=(v-c)*h,d.each(function(n){n(c)}),t=0;t<e;++t)r=n[t],null==r.fx?r.x+=r.vx*=y:(r.x=r.fx,r.vx=0),null==r.fy?r.y+=r.vy*=y:(r.y=r.fy,r.vy=0)}function o(){for(var t,r=0,e=n.length;r<e;++r){if(t=n[r],t.index=r,isNaN(t.x)||isNaN(t.y)){var i=s*Math.sqrt(r),u=r*x;t.x=i*Math.cos(u),t.y=i*Math.sin(u)}(isNaN(t.vx)||isNaN(t.vy))&&(t.vx=t.vy=0)}}function f(t){return t.initialize&&t.initialize(n),t}var a,c=1,l=.001,h=1-Math.pow(l,1/300),v=0,y=.6,d=r.map(),g=i.timer(t),p=e.dispatch("tick","end");return null==n&&(n=[]),o(),a={tick:u,restart:function(){return g.restart(t),a},stop:function(){return g.stop(),a},nodes:function(t){return arguments.length?(n=t,o(),d.each(f),a):n},alpha:function(n){return arguments.length?(c=+n,a):c},alphaMin:function(n){return arguments.length?(l=+n,a):l},alphaDecay:function(n){return arguments.length?(h=+n,a):+h},alphaTarget:function(n){return arguments.length?(v=+n,a):v},velocityDecay:function(n){return arguments.length?(y=1-n,a):1-y},force:function(n,t){return arguments.length>1?(null==t?d.remove(n):d.set(n,f(t)),a):d.get(n)},find:function(t,r,e){var i,u,o,f,a,c=0,l=n.length;for(null==e?e=1/0:e*=e,c=0;c<l;++c)f=n[c],i=t-f.x,u=r-f.y,o=i*i+u*u,o<e&&(a=f,e=o);return a},on:function(n,t){return arguments.length>1?(p.on(n,t),a):p.on(n)}}},M=function(){function n(n){var r,a=u.length,h=t.quadtree(u,c,l).visitAfter(e);for(f=n,r=0;r<a;++r)o=u[r],h.visit(i)}function r(){if(u){var n,t=u.length;for(a=new Array(t),n=0;n<t;++n)a[n]=+h(u[n],n,u)}}function e(n){var t,r,e,i,u,o=0;if(n.length){for(e=i=u=0;u<4;++u)(t=n[u])&&(r=t.value)&&(o+=r,e+=r*t.x,i+=r*t.y);n.x=e/o,n.y=i/o}else{t=n,t.x=t.data.x,t.y=t.data.y;do o+=a[t.data.index];while(t=t.next)}n.value=o}function i(n,t,r,e){if(!n.value)return!0;var i=n.x-o.x,u=n.y-o.y,c=e-t,l=i*i+u*u;if(c*c/s<l)return l<g&&(0===i&&(i=y(),l+=i*i),0===u&&(u=y(),l+=u*u),l<d&&(l=Math.sqrt(d*l)),o.vx+=i*n.value*f/l,o.vy+=u*n.value*f/l),!0;if(!(n.length||l>=g)){(n.data!==o||n.next)&&(0===i&&(i=y(),l+=i*i),0===u&&(u=y(),l+=u*u),l<d&&(l=Math.sqrt(d*l)));do n.data!==o&&(c=a[n.data.index]*f/l,o.vx+=i*c,o.vy+=u*c);while(n=n.next)}}var u,o,f,a,h=v(-30),d=1,g=1/0,s=.81;return n.initialize=function(n){u=n,r()},n.strength=function(t){return arguments.length?(h="function"==typeof t?t:v(+t),r(),n):h},n.distanceMin=function(t){return arguments.length?(d=t*t,n):Math.sqrt(d)},n.distanceMax=function(t){return arguments.length?(g=t*t,n):Math.sqrt(g)},n.theta=function(t){return arguments.length?(s=t*t,n):Math.sqrt(s)},n},q=function(n){function t(n){for(var t,r=0,o=e.length;r<o;++r)t=e[r],t.vx+=(u[r]-t.x)*i[r]*n}function r(){if(e){var t,r=e.length;for(i=new Array(r),u=new Array(r),t=0;t<r;++t)i[t]=isNaN(u[t]=+n(e[t],t,e))?0:+o(e[t],t,e)}}var e,i,u,o=v(.1);return"function"!=typeof n&&(n=v(null==n?0:+n)),t.initialize=function(n){e=n,r()},t.strength=function(n){return arguments.length?(o="function"==typeof n?n:v(+n),r(),t):o},t.x=function(e){return arguments.length?(n="function"==typeof e?e:v(+e),r(),t):n},t},w=function(n){function t(n){for(var t,r=0,o=e.length;r<o;++r)t=e[r],t.vy+=(u[r]-t.y)*i[r]*n}function r(){if(e){var t,r=e.length;for(i=new Array(r),u=new Array(r),t=0;t<r;++t)i[t]=isNaN(u[t]=+n(e[t],t,e))?0:+o(e[t],t,e)}}var e,i,u,o=v(.1);return"function"!=typeof n&&(n=v(null==n?0:+n)),t.initialize=function(n){e=n,r()},t.strength=function(n){return arguments.length?(o="function"==typeof n?n:v(+n),r(),t):o},t.y=function(e){return arguments.length?(n="function"==typeof e?e:v(+e),r(),t):n},t};n.forceCenter=h,n.forceCollide=d,n.forceLink=g,n.forceManyBody=M,n.forceSimulation=p,n.forceX=q,n.forceY=w,Object.defineProperty(n,"__esModule",{value:!0})});